<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>New Earth DAO</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}

html,body{
  height:100%;
  font-family:'Roboto',sans-serif;
  overflow:hidden;
  cursor:none;
}

/* Fondo dinámico */
body{
  background:url('tierra.png') no-repeat center center fixed;
  background-size:cover;
}

/* ================== EFECTO ESTRELLAS SUAVE ================== */
body::before{
  content:"";
  position:fixed;
  inset:0;
  background:
    radial-gradient(1px 1px at 20% 30%, rgba(255,255,255,.6), transparent),
    radial-gradient(1px 1px at 70% 80%, rgba(0,255,106,.7), transparent),
    radial-gradient(1px 1px at 40% 60%, rgba(0,255,255,.6), transparent);
  animation: starsMove 90s linear infinite;
  pointer-events:none;
  z-index:0;
}

@keyframes starsMove{
  from{background-position:0 0}
  to{background-position:-3000px 3000px}
}

/* ================== SCANLINES FUTURISTAS ================== */
body::after{
  content:"";
  position:fixed;
  inset:0;
  background:linear-gradient(
    rgba(0,255,106,0.035) 1px,
    transparent 1px
  );
  background-size:100% 3px;
  pointer-events:none;
  z-index:1;
}

/* Ajuste para móviles */
@media (max-width:768px){
  h1{font-size:2.5rem;}
  p{font-size:1rem;margin:10px;}
  .btn{padding:.8rem 1.5rem;font-size:1rem;}
}

/* Overlay principal */
#overlay{
  position:absolute;
  inset:0;
  background:radial-gradient(circle at center, rgba(0,60,20,.65), rgba(0,0,0,.85));
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  color:#b0ff90;
  text-align:center;
  backdrop-filter:blur(2px);
  z-index:2;
}

h1{
  font-family:'Orbitron',sans-serif;
  font-size:4rem;
  text-shadow:0 0 20px #00ff6a;
  animation: titlePulse 3s ease-in-out infinite alternate;
}

@keyframes titlePulse{
  from{
    text-shadow:
      0 0 20px #00ff6a,
      0 0 40px #00ff6a;
  }
  to{
    text-shadow:
      0 0 35px #7affc2,
      0 0 70px #00ff6a;
  }
}

p{
  font-size:1.4rem;
  margin:20px;
}

/* Botones */
.btn{
  margin:10px;
  padding:1rem 2rem;
  font-size:1.1rem;
  border:2px solid #00ff6a;
  border-radius:12px;
  background:rgba(0,0,0,0.3);
  color:#00ff6a;
  font-family:'Orbitron',sans-serif;
  cursor:pointer;
  position:relative;
  overflow:hidden;
}

.btn::before{
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(120deg,transparent,rgba(0,255,106,.6),transparent);
  transform:translateX(-100%);
}

.btn:hover::before{
  animation: energySweep .9s;
}

@keyframes energySweep{
  to{transform:translateX(100%)}
}

.btn:hover{
  background:#00ff6a;
  color:#002200;
  box-shadow:0 0 25px #00ff6a;
}

/* Cursor */
#custom-cursor{
  position:fixed;
  width:32px;
  height:32px;
  pointer-events:none;
  background:url('cursor-sun.png') no-repeat center;
  background-size:contain;
  transform:translate(-50%,-50%);
  z-index:9999;
}

/* ================= MODAL CLAIM ================= */
#claim-modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.8);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:9998;
}

#claim-box{
  background:linear-gradient(180deg,#001a00,#000);
  border:2px solid #00ff6a;
  padding:30px;
  width:360px;
  border-radius:14px;
  text-align:center;
  box-shadow:0 0 30px #00ff6a;
}

#claim-box h2{
  font-family:'Orbitron';
  color:#00ff6a;
  margin-bottom:20px;
}

input{
  width:100%;
  padding:10px;
  margin-bottom:15px;
  background:#000;
  border:1px solid #00ff6a;
  color:#00ff6a;
}

#claim-message{
  margin-top:10px;
  font-size:0.9rem;
}

.close-btn{
  margin-top:15px;
  background:none;
  border:none;
  color:#ff6666;
  cursor:pointer;
}

/* Video centrado, movable y expandible */
#heygen-video-container{
  position:fixed;
  top:70%;
  left:50%;
  transform:translateX(-50%);
  display:none;
  z-index:9997;
  border:2px solid #00ff6a;
  border-radius:12px;
  overflow:hidden;
  background:#000;
  width:400px;
  max-width:90%;
  cursor:grab;
  box-shadow:0 0 35px #00ff6a;
}

#heygen-video{
  width:100%;
  display:block;
}

#expand-btn{
  position:absolute;
  top:5px;
  right:5px;
  padding:5px 10px;
  background:rgba(0,255,106,0.8);
  border:none;
  border-radius:6px;
  cursor:pointer;
  font-family:'Orbitron',sans-serif;
  font-size:0.9rem;
  z-index:9999;
}
</style>
</head>

<body>

<div id="overlay">
  <h1>NERA DAO</h1>
  <p>Grow together like trees, connecting energy, innovation and collaboration.</p>

  <a href="DAO ENTRY & EXIT GAME PLAN STYLE 3.html" class="btn">Enter DAO</a>
  <button class="btn" onclick="openClaim()">Claim Tokens</button>
</div>

<div id="claim-modal">
  <div id="claim-box">
    <h2>Claim NERA</h2>
    <input id="user-code" placeholder="Approval Code">
    <button class="btn" onclick="claimTokens()">Claim</button>
    <div id="claim-message"></div>
    <button class="close-btn" onclick="closeClaim()">Close</button>
  </div>
</div>

<div id="custom-cursor"></div>

<div id="heygen-video-container">
  <video id="heygen-video" src="HeyGen - Video Agent_3.mp4"></video>
  <button id="expand-btn">Expand</button>
</div>

<script>
/* ================= CURSOR ================= */
const cursor=document.getElementById('custom-cursor');
let lastX=0;
document.addEventListener('mousemove',e=>{
  cursor.style.left=e.clientX+'px';
  cursor.style.top=e.clientY+'px';
  cursor.style.backgroundImage = e.clientX>lastX
    ? "url('cursor-sun.png')"
    : "url('cursor-moon.png')";
  lastX=e.clientX;
});

/* ================= MODAL ================= */
function openClaim(){document.getElementById("claim-modal").style.display="flex";}
function closeClaim(){document.getElementById("claim-modal").style.display="none";}

/* ================= CLAIM SYSTEM ================= */
const TOTAL_POOL=100_000_000;
const COMMUNITY_POOL=TOTAL_POOL*0.3;
const CLAIM_AMOUNT=1_000_000;
const VALID_CODES=["NERA-ALPHA-001","NERA-BETA-002","NERA-GENESIS-003"];

let usedCodes=JSON.parse(localStorage.getItem("usedCodes"))||[];
let claimed=Number(localStorage.getItem("claimedTokens"))||0;

function claimTokens(){
  const code=document.getElementById("user-code").value.trim();
  const msg=document.getElementById("claim-message");

  if(!VALID_CODES.includes(code)){msg.style.color="red";msg.innerText="Invalid code";return;}
  if(usedCodes.includes(code)){msg.style.color="red";msg.innerText="Code already used";return;}
  if(claimed+CLAIM_AMOUNT>COMMUNITY_POOL){msg.style.color="red";msg.innerText="Pool exhausted";return;}

  usedCodes.push(code);
  claimed+=CLAIM_AMOUNT;
  localStorage.setItem("usedCodes",JSON.stringify(usedCodes));
  localStorage.setItem("claimedTokens",claimed);

  generateEncryptedFile(code);
  msg.style.color="#00ff6a";
  msg.innerText="Claim approved. File downloaded.";
}

function generateEncryptedFile(code){
  const uuid=crypto.randomUUID();
  const time=new Date().toISOString();
  const key=btoa(`${code}|${uuid}|${time}|NERA`).slice(0,24).toUpperCase();
  const content=`NERA TOKEN CLAIM\nKey:${key}\nAmount:${CLAIM_AMOUNT}\nTime:${time}`;
  const blob=new Blob([content],{type:"text/plain"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download=`NERA_CLAIM_${key}.txt`;
  a.click();
}

/* ================= VIDEO HEYGEN ================= */
const container=document.getElementById('heygen-video-container');
const video=document.getElementById('heygen-video');
window.addEventListener('load',()=>{
  setTimeout(()=>{
    container.style.display='block';

    function playAudio(){
      video.muted = false;
      video.play();
      document.removeEventListener('click', playAudio);
    }
    document.addEventListener('click', playAudio);
  },2000);
});

/* ================= BOTON EXPANDIR ================= */
const expandBtn=document.getElementById('expand-btn');
expandBtn.addEventListener('click',()=>{
  if(container.style.width==='400px'){
    container.style.width='90%';
    container.style.height='auto';
  }else{
    container.style.width='400px';
    container.style.height='auto';
  }
});

/* ================= MOVIMIENTO DEL VIDEO ================= */
let isDragging=false,offsetX=0,offsetY=0;

function startDrag(e){
  isDragging=true;
  const rect=container.getBoundingClientRect();
  offsetX=(e.touches?e.touches[0].clientX:e.clientX)-rect.left;
  offsetY=(e.touches?e.touches[0].clientY:e.clientY)-rect.top;
  container.style.cursor='grabbing';
}

function drag(e){
  if(!isDragging)return;
  e.preventDefault();
  const x=(e.touches?e.touches[0].clientX:e.clientX)-offsetX;
  const y=(e.touches?e.touches[0].clientY:e.clientY)-offsetY;
  container.style.left=x+'px';
  container.style.top=y+'px';
}

function stopDrag(){
  isDragging=false;
  container.style.cursor='grab';
}

container.addEventListener('mousedown',startDrag);
container.addEventListener('touchstart',startDrag);
document.addEventListener('mousemove',drag);
document.addEventListener('touchmove',drag);
document.addEventListener('mouseup',stopDrag);
document.addEventListener('touchend',stopDrag);

/* ================= FONDO DINÁMICO ================= */
const backgrounds=['tierra.png','tierra2.png','tierra3.png'];
let bgIndex=0;
setInterval(()=>{
  bgIndex=(bgIndex+1)%backgrounds.length;
  document.body.style.backgroundImage=`url('${backgrounds[bgIndex]}')`;
},5000);
</script>

</body>
</html>

